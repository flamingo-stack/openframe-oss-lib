<!-- source-hash: 92fa4e89e14285774900d89248cf1c51 -->
A test automation utility that orchestrates the complete OAuth2 PKCE authentication flow for OpenFrame, handling all steps from initial authorization through token extraction.

## Key Components

- **AuthFlow**: Main class implementing a fluent builder pattern for OAuth2 authentication
- **login()**: Static entry method that executes the complete authentication flow
- **Private flow methods**: Chain of methods handling each OAuth2 step:
  - `startFlow()`: Initiates OAuth flow and extracts state/challenge parameters
  - `initAuth()`: Performs authorization initialization
  - `postCredentials()`: Submits user credentials
  - `getAuthCode()`: Retrieves authorization code from redirect
  - `extractTokens()`: Exchanges code for access/refresh tokens

## Usage Example

```java
import com.openframe.test.data.dto.user.User;
import java.util.Map;

// Create test user
User testUser = User.builder()
    .email("test@example.com")
    .password("password123")
    .domain("example.com")
    .build();

// Execute complete OAuth2 flow
Map<String, String> tokens = AuthFlow.login(testUser);

// Extract tokens for API calls
String accessToken = tokens.get("access_token");
String refreshToken = tokens.get("refresh_token");

// Use tokens for authenticated requests
RestAssured.given()
    .cookie("access_token", accessToken)
    .when()
    .get("/api/protected-resource")
    .then()
    .statusCode(200);
```

The class encapsulates complex OAuth2 PKCE flow logic into a single method call, automatically handling tenant lookup, parameter extraction, cookie management, and token retrieval for test scenarios.