<!-- source-hash: 89460ad2f67ffa9cb44158af974de5e6 -->
An abstract base class that provides Spring Retry functionality for Kafka message publishing with exponential backoff and configurable recovery strategies. It wraps a MessageProducer with retry logic to handle transient failures while fast-failing on non-retryable exceptions.

## Key Components

- **`producer`** - The underlying MessageProducer for sending Kafka messages
- **`recoveryHandler`** - Handler for processing failed messages after retries are exhausted
- **`publish()`** - Main entry point with @Retryable annotation for automatic retry logic
- **`recover()` methods** - Recovery handlers for different exception types (overloaded)

## Usage Example

```java
// Extend the base class
public class OrderEventProducer extends BaseRetryingKafkaProducer {
    
    public OrderEventProducer(MessageProducer producer, KafkaRecoveryHandler recoveryHandler) {
        super(producer, recoveryHandler);
    }
    
    public void publishOrderCreated(Order order) {
        KafkaMessage message = new KafkaMessage(order.toJson());
        publish("order-events", order.getId(), message);
    }
}

// Configuration
@Configuration
@EnableRetry
public class KafkaConfig {
    
    @Bean
    public OrderEventProducer orderEventProducer(
            MessageProducer producer, 
            KafkaRecoveryHandler recoveryHandler) {
        return new OrderEventProducer(producer, recoveryHandler);
    }
}
```

The retry configuration uses exponential backoff (500ms → 1s → 2s → 4s → 5s max) with up to 5 attempts for `TransientKafkaSendException`, while `NonRetryableKafkaException` triggers immediate recovery handling.