<!-- source-hash: 510afe9ab276323efd59faf0b5b11b70 -->
This REST controller provides comprehensive device management endpoints for the OpenFrame platform, offering CRUD operations, filtering, and status management for devices in the MSP ecosystem.

## Key Components

**Core Dependencies:**
- `DeviceService` - Primary device data operations
- `DeviceFilterService` - Advanced filtering and aggregation
- `TagService` - Device tagging functionality
- `DeviceMapper` - Entity-to-DTO conversion

**Main Endpoints:**
- `GET /api/v1/devices` - Paginated device listing with filtering
- `GET /api/v1/devices/{machineId}` - Individual device retrieval
- `GET /api/v1/devices/filters` - Available filter options with counts
- `PUT /api/v1/devices/{machineId}/status` - Device status updates

**Advanced Features:**
- Cursor-based pagination with configurable limits (1-100)
- Multi-field filtering (status, type, OS, organization, tags)
- Optional tag loading for performance optimization
- Comprehensive OpenAPI documentation

## Usage Example

```java
// Basic device retrieval with filtering
@GetMapping
public DevicesResponse getDevices(
    @RequestParam List<DeviceStatus> statuses,
    @RequestParam List<DeviceType> deviceTypes,
    @RequestParam String search,
    @RequestParam(defaultValue = "false") Boolean includeTags,
    @RequestParam(defaultValue = "20") @Min(1) @Max(100) Integer limit
) {
    // Builds filter criteria and pagination
    DeviceFilterCriteria criteria = DeviceFilterCriteria.builder()
        .statuses(statuses)
        .deviceTypes(deviceTypes)
        .build();
    
    // Queries devices with optional tag loading
    var result = deviceService.queryDevices(
        deviceMapper.toDeviceFilterOptions(criteria),
        pagination,
        search,
        sortCriteria
    );
    
    return includeTags ? 
        deviceMapper.toDevicesResponseWithTags(result, tags) :
        deviceMapper.toDevicesResponse(result);
}
```

The controller implements comprehensive error handling, authentication via headers (`X-User-Id`, `X-API-Key-Id`), and follows OpenAPI standards for MSP automation workflows.