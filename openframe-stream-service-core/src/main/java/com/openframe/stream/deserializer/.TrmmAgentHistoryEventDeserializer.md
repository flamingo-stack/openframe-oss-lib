<!-- source-hash: 703660625f59a3d27517f07e12ffe652 -->
A Spring component that deserializes Tactical RMM agent history events from database change streams, converting raw database records into structured message events for command and script execution tracking.

## Key Components

- **TrmmAgentHistoryEventDeserializer** - Main deserializer extending `IntegratedToolEventDeserializer`
- **Field Constants** - Database field mappings for `agents_agenthistory` table and JSON details structure
- **TacticalRmmCacheService** - Injected service for agent and script metadata resolution
- **Event Processing Methods** - Overridden methods for extracting agent IDs, event types, messages, timestamps, results, and errors

## Usage Example

```java
@Autowired
private TrmmAgentHistoryEventDeserializer deserializer;

// The deserializer automatically processes database change events
// Event types handled:
// - "cmd_run" -> Command execution events
// - "script_run" -> Script execution events

// Example of event type determination:
JsonNode afterField = // ... database change record
Optional<String> eventType = deserializer.getSourceEventType(afterField);
// Returns: "cmd_run.started", "cmd_run.finished", "script_run.started", or "script_run.finished"

// Message generation examples:
// Command: "Command 'ls -la' started" or "Command 'ls -la' completed"
// Script: "Script 'System Health Check' started" or "Script 'System Health Check' completed"

// Result extraction handles both stdout/stderr for scripts and plain results for commands
// Error extraction specifically captures stderr from script executions
```

The deserializer handles two main event types: command executions (`cmd_run`) and script executions (`script_run`), automatically determining event state (started/finished) based on the presence of results data and resolving agent/script metadata through the cache service.