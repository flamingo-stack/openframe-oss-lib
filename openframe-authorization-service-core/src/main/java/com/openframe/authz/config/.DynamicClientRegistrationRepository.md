<!-- source-hash: ef39fa293fb56027c1f8d15dac80aa21 -->
A Spring Security repository that dynamically resolves OAuth2 client registrations based on tenant context, enabling multi-tenant authentication flows by loading tenant-specific OAuth2 client configurations at runtime.

## Key Components

- **`DynamicClientRegistrationRepository`** - Main component implementing `ClientRegistrationRepository` for tenant-aware OAuth2 client resolution
- **`findByRegistrationId(String)`** - Resolves OAuth2 client registration for a specific provider and tenant combination
- **`resolveTenantId()`** - Private method that extracts tenant ID from context or HTTP session with fallback logic
- **`DynamicClientRegistrationService`** - Injected service dependency for loading tenant-specific client configurations

## Usage Example

```java
@Autowired
private ClientRegistrationRepository clientRepo;

// During OAuth2 flow, Spring Security will automatically call this
public void handleOAuth2Login() {
    // Repository resolves client based on current tenant context
    ClientRegistration client = clientRepo.findByRegistrationId("google");
    
    if (client != null) {
        // OAuth2 flow proceeds with tenant-specific configuration
        log.info("Using client: {}", client.getClientId());
    } else {
        // No tenant context or client not found for tenant
        log.warn("Client registration not available");
    }
}

// Manual tenant context resolution
private void debugTenantResolution() {
    String tenantId = TenantContext.getTenantId(); // Primary source
    // Falls back to HTTP session attribute if context empty
}
```

The repository first checks `TenantContext` for the current tenant ID, then falls back to the HTTP session's `TENANT_ID` attribute, ensuring OAuth2 client configurations are resolved correctly across different request contexts.