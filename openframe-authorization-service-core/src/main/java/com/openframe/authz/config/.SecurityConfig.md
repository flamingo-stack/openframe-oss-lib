<!-- source-hash: aa016c523595889b32ebd4151d3a1cd9 -->
This Spring Security configuration file manages authentication and authorization for the OpenFrame authorization service, handling both form-based login and OAuth2/OIDC SSO integration with support for multi-tenant environments and auto-provisioning.

## Key Components

- **SecurityFilterChain**: Configures HTTP security with OAuth2 login, form authentication, and protected endpoints
- **OAuth2UserService**: Custom OIDC user service handling user auto-provisioning and claim mapping
- **JwtDecoderFactory**: Microsoft-aware JWT decoder with custom issuer validation for multi-tenant scenarios
- **Auto-provisioning Logic**: Automatically creates users based on SSO configuration and domain policies

## Usage Example

```java
@Autowired
private SecurityConfig securityConfig;

// The security filter chain automatically handles:
// - Public endpoints like /login, /oauth2/**, /tenant/**
// - Protected endpoints requiring authentication
// - OAuth2 login flow with custom success handling

// Auto-provisioning occurs when:
// 1. SSO config allows auto-provisioning
// 2. User email domain is in allowed domains list
// 3. User doesn't already exist in tenant

// Microsoft OAuth2 integration handles:
// - Multi-tenant issuer validation
// - Custom JWT decoding with issuer pattern matching
// - Standard OIDC token validation
```

The configuration supports multiple authentication methods, integrates with tenant-specific SSO configurations, and includes robust error handling to prevent authentication flow interruption during user provisioning failures.