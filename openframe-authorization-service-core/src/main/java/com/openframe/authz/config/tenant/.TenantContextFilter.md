<!-- source-hash: a437eca88c00be3c97d391dccc49e559 -->
A servlet filter that extracts and manages tenant context from HTTP requests in a multi-tenant application. The filter runs early in the request processing chain and supports tenant identification through URL paths, query parameters, and session attributes.

## Key Components

- **`doFilterInternal()`** - Main filter logic that extracts tenant ID from request URL, query parameters, or session
- **`EXCLUDED_CONTEXTS`** - Set of URL paths that don't contain tenant information (login, sso, public, etc.)
- **`getString()`** - Helper method to extract the application path from the request URI
- **`TenantContext.setTenantId()`** - Sets the tenant context for the current request thread
- **Session management** - Handles tenant switching scenarios, preserving sessions for onboarding flows

## Usage Example

```java
// The filter automatically processes requests like:
// /tenant123/oauth2/authorize -> extracts "tenant123"
// /mycompany/connect/userinfo -> extracts "mycompany"
// /public/api/health -> no tenant extracted (excluded context)

// Accessing tenant context in downstream components:
@RestController
public class ApiController {
    
    @GetMapping("/api/data")
    public ResponseEntity<?> getData() {
        String tenantId = TenantContext.getTenantId();
        // Use tenant-specific logic
        return ResponseEntity.ok(dataService.getTenantData(tenantId));
    }
}

// Query parameter fallback:
// GET /oauth2/authorize?tenant=mycompany
// Session fallback when no URL or query parameter is present
```

The filter supports special handling for SSO onboarding flows, allowing seamless transition from the onboarding pseudo-tenant to the actual tenant without losing authentication context.