<!-- source-hash: c3cae673d2220865ea16b375cb0d29e4 -->
A simplified user management service for an authorization server that handles essential user operations including registration, authentication lookups, and user lifecycle management with multi-tenant support.

## Key Components

**Core Methods:**
- `findActiveByEmail()` / `findActiveByEmailAndTenant()` - Retrieve active users for authentication
- `registerUser()` - Create new users or reactivate deleted ones within tenant boundaries
- `deactivateUser()` / `reactivateUser()` - Manage user lifecycle states
- `updatePassword()` - Handle password changes with encryption
- `existsByEmailAndTenant()` - Check user existence for validation

**Dependencies:**
- `AuthUserRepository` - Data persistence layer
- `PasswordEncoder` - Secure password handling

## Usage Example

```java
@Autowired
private UserService userService;

// Register a new user
List<UserRole> roles = List.of(UserRole.USER);
AuthUser user = userService.registerUser(
    "tenant123", 
    "user@example.com", 
    "John", 
    "Doe", 
    "password123", 
    roles
);

// Find user for authentication
Optional<AuthUser> authUser = userService.findActiveByEmailAndTenant(
    "user@example.com", 
    "tenant123"
);

// Update password
userService.updatePassword(user.getId(), "newPassword456");

// Deactivate user
userService.deactivateUser(user);
```

The service enforces tenant isolation and prevents duplicate active users within the same tenant while allowing reactivation of previously deleted accounts.