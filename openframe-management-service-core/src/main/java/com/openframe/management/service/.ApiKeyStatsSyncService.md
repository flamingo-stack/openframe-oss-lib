<!-- source-hash: ad234dabe9a5a320f2f487699dac5765 -->
A Spring service that synchronizes API key usage statistics from Redis cache to MongoDB for persistent storage and analytics.

## Key Components

- **`syncStatsToMongo()`** - Main synchronization method that transfers all pending stats from Redis to MongoDB
- **`syncSingleKey(String redisKey)`** - Processes individual Redis keys, aggregating stats with existing MongoDB records
- **`add(Long a, Long b)`** - Null-safe utility method for adding Long values
- **Dependencies**:
  - `ApiKeyStatsSyncRepository` - Redis operations for retrieving and cleaning up stats data
  - `ApiKeyStatsMongoRepository` - MongoDB operations for persisting aggregated statistics

## Usage Example

```java
@Component
public class StatsScheduler {
    
    private final ApiKeyStatsSyncService syncService;
    
    @Scheduled(fixedRate = 300000) // Every 5 minutes
    public void syncStats() {
        syncService.syncStatsToMongo();
    }
}

// The service aggregates stats like:
// Redis: { "total": 50, "success": 45, "failed": 5 }
// MongoDB existing: { "total": 100, "success": 90, "failed": 10 }
// Result: { "total": 150, "success": 135, "failed": 15 }
```

The service implements a fail-safe synchronization pattern, processing each Redis key individually and only deleting successfully synced data. It handles null values gracefully and maintains the most recent `lastUsed` timestamp across sync operations.