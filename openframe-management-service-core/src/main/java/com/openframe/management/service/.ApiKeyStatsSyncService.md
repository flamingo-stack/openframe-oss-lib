<!-- source-hash: ad234dabe9a5a320f2f487699dac5765 -->
Service responsible for synchronizing API key usage statistics from Redis cache to MongoDB for persistent storage.

## Key Components

**Main Service Methods:**
- `syncStatsToMongo()` - Primary method that orchestrates the complete sync process from Redis to MongoDB
- `syncSingleKey(String redisKey)` - Handles synchronization of individual API key statistics
- `add(Long a, Long b)` - Utility method for null-safe addition of Long values

**Dependencies:**
- `ApiKeyStatsSyncRepository` - Redis repository for temporary stats storage
- `ApiKeyStatsMongoRepository` - MongoDB repository for persistent stats storage
- `ApiKeyStats` - Document model representing API key usage statistics

## Usage Example

```java
@Autowired
private ApiKeyStatsSyncService syncService;

// Typically called by a scheduled task
@Scheduled(fixedDelay = 300000) // Every 5 minutes
public void scheduledSync() {
    syncService.syncStatsToMongo();
}

// Manual sync trigger
public void performManualSync() {
    syncService.syncStatsToMongo();
}
```

The service aggregates statistics (total requests, successful/failed counts, last usage timestamp) from Redis and merges them with existing MongoDB records. It handles data extraction, null-safe arithmetic operations, and cleanup of processed Redis keys while maintaining comprehensive error logging throughout the sync process.