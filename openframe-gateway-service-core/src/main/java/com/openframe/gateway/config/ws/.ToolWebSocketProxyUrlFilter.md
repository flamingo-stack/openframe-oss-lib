<!-- source-hash: 7388bae9411f098dc0b90044d5e7995c -->
This abstract Spring Cloud Gateway filter handles WebSocket proxy routing for integrated tools by resolving tool-specific WebSocket URLs and forwarding requests to the appropriate backend services.

## Key Components

- **Abstract Methods**:
  - `getRequestToolId(String path)` - Extract tool ID from request path
  - `getEndpointPrefix()` - Define endpoint prefix for proxy URL resolution

- **Dependencies**:
  - `ReactiveIntegratedToolRepository` - Tool data access
  - `ToolUrlService` - Tool URL management
  - `ProxyUrlResolver` - URL resolution logic

- **Core Methods**:
  - `filter()` - Main filtering logic for WebSocket proxy routing
  - `getToolUrl()` - Retrieves and validates tool WebSocket configuration

## Usage Example

```java
@Component
public class MyToolWebSocketFilter extends ToolWebSocketProxyUrlFilter {

    public MyToolWebSocketFilter(ReactiveIntegratedToolRepository toolRepository,
                                ToolUrlService toolUrlService,
                                ProxyUrlResolver proxyUrlResolver) {
        super(toolRepository, toolUrlService, proxyUrlResolver);
    }

    @Override
    protected String getRequestToolId(String path) {
        // Extract tool ID from path like "/ws/tool/{toolId}/socket"
        return path.split("/")[3];
    }

    @Override
    protected String getEndpointPrefix() {
        return "/ws";
    }
}
```

The filter validates tool availability, retrieves WebSocket URLs, and sets the proxy destination using Spring Cloud Gateway's routing attributes.