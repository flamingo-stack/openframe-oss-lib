<!-- source-hash: 97cb11fd62a59ce6c3130e1dc75b4a07 -->
A Spring Boot service that handles API key validation in a reactive application, parsing API keys, verifying credentials against the database, and coordinating with statistics tracking services.

## Key Components

- **`validateApiKey(String)`** - Main validation method that parses API key format, checks database existence, validates credentials, and returns validation results
- **`recordSuccessfulRequest(String)`** - Records successful API key usage for statistics tracking
- **`recordFailedRequest(String)`** - Records failed API key attempts for monitoring
- **`ParsedApiKey`** - Internal record class for validated API key components (keyId and secret)
- **`ApiKeyValidationResult`** - Public result class containing validation status, error messages, and API key entity

## Usage Example

```java
@RestController
@RequiredArgsConstructor
public class ApiController {
    
    private final ApiKeyValidationService validationService;
    
    @PostMapping("/api/data")
    public Mono<ResponseEntity<String>> handleRequest(
            @RequestHeader("Authorization") String authorization) {
        
        String apiKey = extractApiKey(authorization); // Extract from "Bearer ak_123.sk_456"
        
        return validationService.validateApiKey(apiKey)
                .flatMap(result -> {
                    if (!result.isValid()) {
                        return Mono.just(ResponseEntity.status(401)
                                .body("Unauthorized: " + result.getErrorMessage()));
                    }
                    
                    // Record successful usage
                    validationService.recordSuccessfulRequest(result.getApiKey().getId());
                    
                    return processRequest()
                            .map(data -> ResponseEntity.ok(data))
                            .onErrorResume(error -> {
                                validationService.recordFailedRequest(result.getApiKey().getId());
                                return Mono.just(ResponseEntity.status(500).body("Error"));
                            });
                });
    }
}
```

The service expects API keys in the format `ak_{keyId}.sk_{secret}` and uses password encoding for secure secret verification. It integrates with `ReactiveApiKeyRepository` for database operations and `ApiKeyStatsService` for usage tracking.