<!-- source-hash: 9cbef12f4c28965e3b386ba067f2ff72 -->
A Spring service that handles forced tool agent updates across machines, supporting both targeted machine lists and all-machine deployments with error handling and status tracking.

## Key Components

- **process()** - Forces tool agent updates for specific machines based on request
- **processAll()** - Forces tool agent updates across all registered machines  
- **processMachine()** - Handles individual machine update processing with error recovery
- **validateToolAgentId()** / **validateMachineIds()** - Input validation methods
- **buildResponseItem()** - Creates response items with status tracking

## Usage Example

```java
@Autowired
private ForceToolAgentUpdateService updateService;

// Force update specific machines
ForceToolAgentUpdateRequest request = new ForceToolAgentUpdateRequest();
request.setToolAgentId("agent-123");
request.setMachineIds(List.of("machine-1", "machine-2"));

ForceToolAgentUpdateResponse response = updateService.process(request);
// Returns list of response items with PROCESSED or FAILED status per machine

// Force update all machines
ForceToolAgentUpdateResponse allResponse = updateService.processAll("agent-123");
// Automatically discovers and updates all registered machines
```

The service retrieves tool agent configurations from the repository, publishes update events, and returns detailed status information for each machine processed. Failed updates are logged and marked with FAILED status rather than interrupting the entire operation.