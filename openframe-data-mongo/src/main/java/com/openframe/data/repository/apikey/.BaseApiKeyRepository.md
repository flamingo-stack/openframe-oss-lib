<!-- source-hash: b01dd19db7621cc23fe0aa7516a2e3bb -->
This file defines a technology-agnostic base interface for API key repository operations, using generic type parameters to support both blocking and reactive implementations.

## Key Components

- **BaseApiKeyRepository<T, B, L, ID>** - Generic interface with type parameters for different return types:
  - `T` - Return type wrapper (Optional for blocking, Mono for reactive)
  - `B` - Boolean return type (boolean for blocking, Mono<Boolean> for reactive)
  - `L` - List return type (List for blocking, Flux for reactive)
  - `ID` - ID type (String in this case)

- **findByIdAndUserId()** - Retrieves an API key by its ID and associated user ID
- **findByUserId()** - Gets all API keys belonging to a specific user
- **findExpiredKeys()** - Finds API keys that have expired based on a given timestamp

## Usage Example

```java
// Blocking implementation
public class JpaApiKeyRepository implements BaseApiKeyRepository<Optional<ApiKey>, Boolean, List<ApiKey>, String> {
    @Override
    public Optional<ApiKey> findByIdAndUserId(String keyId, String userId) {
        return apiKeyJpaRepository.findByIdAndUserId(keyId, userId);
    }
    
    @Override
    public List<ApiKey> findByUserId(String userId) {
        return apiKeyJpaRepository.findByUserId(userId);
    }
    
    @Override
    public List<ApiKey> findExpiredKeys(Instant currentTime) {
        return apiKeyJpaRepository.findByExpiresAtBefore(currentTime);
    }
}

// Reactive implementation
public class ReactiveApiKeyRepository implements BaseApiKeyRepository<Mono<ApiKey>, Mono<Boolean>, Flux<ApiKey>, String> {
    @Override
    public Mono<ApiKey> findByIdAndUserId(String keyId, String userId) {
        return reactiveApiKeyRepository.findByIdAndUserId(keyId, userId);
    }
    
    @Override
    public Flux<ApiKey> findByUserId(String userId) {
        return reactiveApiKeyRepository.findByUserId(userId);
    }
    
    @Override
    public Flux<ApiKey> findExpiredKeys(Instant currentTime) {
        return reactiveApiKeyRepository.findByExpiresAtBefore(currentTime);
    }
}
```