<!-- source-hash: 1c515f406ff281130a762f735441ad73 -->
This repository interface provides MongoDB-based data access operations for API key management in a Spring Boot web application, extending both MongoRepository and a custom base repository interface.

## Key Components

- **ApiKeyRepository** - Main repository interface extending MongoRepository for CRUD operations
- **findByIdAndUserId()** - Query method to find API keys by ID and user ID with custom MongoDB query
- **findByIdAndUserIdOrElseThrow()** - Convenience method that throws ApiKeyNotFoundException when key not found
- **findByUserId()** - Retrieves all API keys for a specific user
- **findExpiredKeys()** - Finds expired but still enabled API keys using timestamp comparison

## Usage Example

```java
@Autowired
private ApiKeyRepository apiKeyRepository;

// Find API key with error handling
ApiKey apiKey = apiKeyRepository.findByIdAndUserIdOrElseThrow("key123", "user456");

// Get all keys for a user
List<ApiKey> userKeys = apiKeyRepository.findByUserId("user456");

// Find expired keys for cleanup
List<ApiKey> expiredKeys = apiKeyRepository.findExpiredKeys(Instant.now());

// Standard repository operations
Optional<ApiKey> optionalKey = apiKeyRepository.findById("key123");
apiKeyRepository.save(newApiKey);
```

The repository uses conditional bean creation (`@ConditionalOnWebApplication`) to ensure it's only instantiated in servlet-based web applications.