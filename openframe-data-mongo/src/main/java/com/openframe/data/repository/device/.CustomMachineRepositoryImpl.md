<!-- source-hash: b42f531c2550fea652c17a0a84bd5365 -->
Custom MongoDB repository implementation for paginated and filtered machine/device queries in OpenFrame's device management system.

## Key Components

- **`findMachinesWithCursor()`** - Implements cursor-based pagination with ObjectId cursors and configurable sorting
- **`buildDeviceQuery()`** - Constructs MongoDB queries based on filter criteria (status, device type, OS type, organization)
- **`applySearchCriteria()`** - Adds text search across multiple machine fields using regex matching
- **`isSortableField()`** - Validates allowed sort fields to prevent injection attacks
- **Field validation constants** - Defines sortable fields and default sorting behavior

## Usage Example

```java
// Create filter for active Windows devices
MachineQueryFilter filter = new MachineQueryFilter();
filter.setStatuses(List.of("ONLINE", "IDLE"));
filter.setOsTypes(List.of("WINDOWS"));
filter.setOrganizationIds(List.of("org123", "org456"));

// Build query with search term
Query query = repository.buildDeviceQuery(filter, "server");

// Execute paginated query
List<Machine> machines = repository.findMachinesWithCursor(
    query, 
    "lastCursorId",  // ObjectId cursor for pagination
    50,              // Page size
    "lastSeen",      // Sort field
    "DESC"           // Sort direction
);

// Validate sort field before using
if (repository.isSortableField("customField")) {
    // Safe to use in sorting
}
```

The implementation provides efficient cursor-based pagination using MongoDB ObjectIds and supports complex filtering with case-insensitive text search across machine attributes like hostname, IP address, serial number, and hardware details.