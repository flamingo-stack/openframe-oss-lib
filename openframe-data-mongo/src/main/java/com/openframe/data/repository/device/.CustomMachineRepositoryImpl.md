<!-- source-hash: def7dd0d86dd320f9cd1895f4b60a651 -->
A MongoDB repository implementation that provides custom query capabilities for Machine documents, including cursor-based pagination and flexible filtering with search functionality.

## Key Components

- **CustomMachineRepositoryImpl**: Main repository class implementing `CustomMachineRepository`
- **findMachinesWithCursor()**: Handles cursor-based pagination using ObjectId for efficient large dataset navigation
- **buildDeviceQuery()**: Constructs MongoDB queries based on filter criteria and search terms
- **applySearchCriteria()**: Implements case-insensitive regex search across multiple machine fields

## Usage Example

```java
// Inject the repository
@Autowired
private CustomMachineRepository machineRepository;

// Create filter criteria
MachineQueryFilter filter = MachineQueryFilter.builder()
    .statuses(Arrays.asList("ACTIVE", "INACTIVE"))
    .deviceTypes(Arrays.asList("LAPTOP", "DESKTOP"))
    .organizationIds(Arrays.asList("org1", "org2"))
    .build();

// Build query with search
Query query = machineRepository.buildDeviceQuery(filter, "Dell");

// Execute with cursor pagination
List<Machine> machines = machineRepository.findMachinesWithCursor(
    query, 
    "507f1f77bcf86cd799439011", // cursor ObjectId
    20 // limit
);

// Search across hostname, IP, serial number, etc.
Query searchQuery = machineRepository.buildDeviceQuery(null, "192.168");
```

The implementation supports filtering by status, device type, OS type, and organization, while providing efficient pagination through MongoDB ObjectId cursors and comprehensive text search capabilities.