<!-- source-hash: c3eac3c1fc5f7dad83f7704974c43c65 -->
A MongoDB document model for persisting OAuth2 authorization data with automatic cleanup capabilities and optimized indexing for Spring Security OAuth2 integration.

## Key Components

- **@Document Mapping**: Maps to `oauth2_authorizations` MongoDB collection
- **Compound Index**: Optimizes queries by `registeredClientId` and `principalName`
- **Authorization Request Fields**: PKCE-compatible storage (`arClientId`, `arAuthorizationUri`, etc.)
- **Token Storage**: Separate fields for authorization codes, access tokens, and refresh tokens
- **TTL Expiration**: Automatic document cleanup using MongoDB's TTL index
- **updateExpiresAt()**: Utility method to set document expiration based on latest token expiry

## Usage Example

```java
// Create authorization document
MongoOAuth2Authorization auth = new MongoOAuth2Authorization();
auth.setRegisteredClientId("client-123");
auth.setPrincipalName("user@example.com");
auth.setAuthorizationGrantType("authorization_code");

// Set authorization code
auth.setAuthorizationCodeValue("auth_code_xyz");
auth.setAuthorizationCodeIssuedAt(Instant.now());
auth.setAuthorizationCodeExpiresAt(Instant.now().plusSeconds(600));

// Set access token
auth.setAccessTokenValue("access_token_abc");
auth.setAccessTokenIssuedAt(Instant.now());
auth.setAccessTokenExpiresAt(Instant.now().plusSeconds(3600));
auth.setAccessTokenType("Bearer");
auth.setAccessTokenScopes("read write");

// Update TTL expiration
auth.updateExpiresAt(); // Sets expiresAt to latest token expiration

// Save to MongoDB
repository.save(auth);
```

The document automatically expires when all tokens have expired, ensuring efficient cleanup of stale authorization data.