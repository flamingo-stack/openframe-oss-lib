<!-- source-hash: 85963aa6938d5200c1243a2f57fe70f6 -->
A Spring service responsible for processing and publishing tool installation messages to connected machines via NATS messaging, handling command parameter resolution and tool agent configuration.

## Key Components

- **process()** - Main entry point that processes tool installation for a specific machine and tool agent, with optional reinstall flag
- **getIntegratedToolData()** - Retrieves integrated tool data by ID, returning empty tool data if no ID is provided
- **toolCommandParamsResolver** - Resolves dynamic parameters for both installation and run command arguments
- **toolInstallationNatsPublisher** - Publishes processed tool installation messages to NATS
- **integratedToolService** - Service for retrieving tool configuration data

## Usage Example

```java
@Autowired
private ToolInstallationService toolInstallationService;

// Process tool installation for a machine
IntegratedToolAgent toolAgent = new IntegratedToolAgent();
toolAgent.setToolId("docker-tool-123");
toolAgent.setInstallationCommandArgs(Arrays.asList("--config", "${FLEET_SECRET}"));
toolAgent.setRunCommandArgs(Arrays.asList("--port", "${DEFAULT_PORT}"));

// Standard installation
toolInstallationService.process("machine-456", toolAgent);

// Force reinstallation
toolInstallationService.process("machine-456", toolAgent, true);
```

The service is conditionally enabled via `spring.cloud.stream.enabled` property and includes comprehensive error handling with logging. It processes command arguments through parameter resolution before publishing installation messages via NATS messaging system.