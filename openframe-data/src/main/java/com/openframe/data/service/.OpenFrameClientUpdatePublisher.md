<!-- source-hash: ad97c78b8d7ff3d078e9b4b9d8c6cc16 -->
A Spring service that publishes client update messages to all machines via NATS messaging when OpenFrame client configurations change. The service manages publish state tracking and can be conditionally enabled via configuration properties.

## Key Components

- **publish()** - Main method that publishes client configuration updates to the `machine.all.client-update` NATS topic
- **markAsNonPublished()** - Updates the configuration's publish state to indicate publishing is in progress
- **buildMessage()** - Constructs the `OpenFrameClientUpdateMessage` with version and download configuration data
- **markAsPublished()** - Updates the configuration's publish state to indicate successful publishing
- **clientUpdateFeatureEnabled** - Configuration property to enable/disable the publishing functionality

## Usage Example

```java
@Autowired
private OpenFrameClientUpdatePublisher publisher;

public void deployNewClientVersion() {
    // Get or create client configuration
    OpenFrameClientConfiguration config = new OpenFrameClientConfiguration();
    config.setVersion("2.1.0");
    config.setDownloadConfiguration(downloadConfig);
    
    // Publish update to all machines
    publisher.publish(config);
    // This will send a NATS message to topic "machine.all.client-update"
    // and track the publish state in the database
}
```

The service requires `spring.cloud.stream.enabled=true` and `openframe.client.update.feature.enabled=true` to function. It ensures atomic publish state management by marking configurations as non-published before sending and published after successful NATS delivery.