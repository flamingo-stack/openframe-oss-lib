<!-- source-hash: 687eef666507bfcfb05b9c0d73a3b4a3 -->
A comprehensive test suite for the MachineTagEventAspect class that validates aspect-oriented programming (AOP) interceptors for machine tag repository operations. This test class ensures proper event processing for machine, machine tag, and tag save operations.

## Key Components

- **MachineTagEventAspectTest**: Main test class using Mockito for mocking dependencies
- **machineTagEventService**: Mocked service for processing machine tag events
- **proceedingJoinPoint**: Mocked AOP join point for around advice testing
- **machineTagEventAspect**: The aspect under test that intercepts repository operations

## Usage Example

```java
@ExtendWith(MockitoExtension.class)
class MachineTagEventAspectTest {
    
    @Mock
    private MachineTagEventService machineTagEventService;
    
    @Test
    void testMachineSaveAspect() {
        // Arrange
        Machine machine = new Machine();
        machine.setId("machine-1");
        machine.setHostname("test-machine");
        
        // Act - test after advice
        machineTagEventAspect.afterMachineSave(null, machine, machine);
        
        // Assert service was called
        verify(machineTagEventService, times(1)).processMachineSave(machine);
    }
    
    @Test
    void testAroundTagSave_ExistingTag() throws Throwable {
        // Test around advice for tag operations
        Tag tag = new Tag();
        tag.setId("tag-1");
        
        when(proceedingJoinPoint.proceed()).thenReturn(tag);
        
        Object result = machineTagEventAspect.aroundTagSave(proceedingJoinPoint, tag);
        
        verify(machineTagEventService, times(1)).processTagSave(tag);
        assertEquals(tag, result);
    }
}
```

The test suite covers various scenarios including single/batch operations, new vs existing entity handling, error conditions, and ensures the aspect properly delegates to the event service while maintaining transactional integrity.