<!-- source-hash: b80f4a76853de0e342d8878f295e53be -->
A Spring Boot component that listens to NATS JetStream messages for installed agent information and processes them using a dedicated service. It handles message subscription, consumer configuration, and graceful shutdown.

## Key Components

- **subscribeToInstalledAgents()** - Event listener that sets up JetStream subscription on application startup
- **buildConsumerConfig()** - Creates or updates NATS consumer configuration with retry policies
- **handleMessage()** - Processes incoming installed agent messages and delegates to service layer
- **cleanup()** - PreDestroy method for graceful shutdown of subscriptions and dispatcher

## Usage Example

```java
// The listener automatically starts when Spring Boot application is ready
// Configuration constants define the behavior:
private static final String STREAM_NAME = "INSTALLED_AGENTS";
private static final String SUBJECT = "machine.*.installed-agent";
private static final int MAX_DELIVER = 50;
private static final Duration ACK_WAIT = Duration.ofSeconds(30);

// Message processing flow:
// 1. Extract machine ID from message subject
// 2. Deserialize InstalledAgentMessage from JSON
// 3. Call installedAgentService.addInstalledAgent()
// 4. Acknowledge message on success
// 5. Leave unacked for redelivery on failure

// Manual cleanup if needed:
@Autowired
private InstalledAgentListener listener;

public void shutdown() {
    listener.cleanup(); // Gracefully unsubscribes and drains dispatcher
}
```