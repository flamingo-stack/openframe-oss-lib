<!-- source-hash: 4afc6138f1826af0eab39e1836a28616 -->
A Spring component that listens for machine heartbeat messages via NATS messaging system and processes them to track machine status.

## Key Components

- **`@EventListener(ApplicationReadyEvent.class)`** - Automatically subscribes to heartbeat messages when the application starts
- **`subscribeToMachineHeartbeats()`** - Sets up NATS dispatcher to listen on `machine.*.heartbeat` subject pattern
- **`handleMessage(Message)`** - Processes incoming heartbeat messages by extracting machine ID and timestamp
- **`@PreDestroy cleanup()`** - Gracefully shuts down the NATS dispatcher on application shutdown

## Dependencies

- **`MachineStatusService`** - Processes heartbeat data for machine status tracking
- **`NatsTopicMachineIdExtractor`** - Extracts machine ID from NATS topic patterns
- **NATS Connection** - Handles message subscription and delivery

## Usage Example

```java
// The listener automatically starts when the Spring application is ready
// It subscribes to subjects like:
// - machine.001.heartbeat
// - machine.production-line-A.heartbeat
// - machine.sensor-xyz.heartbeat

// When a heartbeat message arrives, it:
// 1. Extracts machine ID from the subject
// 2. Generates current timestamp
// 3. Calls machineStatusService.processHeartbeat(machineId, timestamp)

// Configuration in application.yml:
// nats:
//   url: nats://localhost:4222
```

The component uses Spring's lifecycle management to ensure clean startup and shutdown, with proper error handling and logging throughout the message processing pipeline.