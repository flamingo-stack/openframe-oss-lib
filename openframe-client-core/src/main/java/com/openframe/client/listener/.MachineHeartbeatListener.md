<!-- source-hash: 4afc6138f1826af0eab39e1836a28616 -->
A Spring component that listens for machine heartbeat messages via NATS messaging system and processes them to track machine status. It automatically subscribes to heartbeat events when the application starts and handles cleanup on shutdown.

## Key Components

- **subscribeToMachineHeartbeats()** - Event listener that subscribes to NATS heartbeat messages when application starts
- **handleMessage()** - Message handler that processes incoming heartbeat messages and updates machine status
- **cleanup()** - PreDestroy method that gracefully drains the NATS dispatcher on shutdown
- **SUBJECT** - Static pattern `"machine.*.heartbeat"` for subscribing to all machine heartbeat topics

## Usage Example

```java
// The component is automatically instantiated by Spring
// Required dependencies injected via constructor:

@Configuration
public class NatsConfig {
    
    @Bean
    public MachineHeartbeatListener heartbeatListener(
        Connection natsConnection,
        ObjectMapper objectMapper,
        MachineStatusService statusService,
        NatsTopicMachineIdExtractor extractor) {
        
        return new MachineHeartbeatListener(
            natsConnection, objectMapper, statusService, extractor);
    }
}

// Publishing a heartbeat message that this listener will receive:
natsConnection.publish("machine.ABC123.heartbeat", heartbeatData);
```

The listener automatically extracts machine IDs from NATS subjects, generates timestamps, and delegates heartbeat processing to the `MachineStatusService`.