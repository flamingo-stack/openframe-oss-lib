<!-- source-hash: cb61bf8f336b1060474aa2fd8fc3e3bb -->
A Spring component that handles NATS client connection and disconnection events to maintain real-time machine status tracking in the OpenFrame system.

## Key Components

- **`ClientConnectionListener`** - Main Spring component that listens for machine connection state changes
- **`machineConnectedConsumer()`** - Bean that processes client connection events and updates machine status to online
- **`machineDisconnectionConsumer()`** - Bean that handles client disconnection events and marks machines as offline
- **`MachineStatusService`** - Injected service for updating machine online/offline states
- **`ObjectMapper`** - JSON deserializer for parsing NATS message payloads

## Usage Example

```java
// The listener automatically processes NATS messages through Spring's function routing
// Connection event message structure:
{
  "client": {
    "name": "machine-001"
  },
  "timestamp": "2024-01-15T10:30:00Z"
}

// When a machine connects, the system automatically:
// 1. Deserializes the ClientConnectionEvent
// 2. Extracts machine ID and timestamp
// 3. Updates status via machineStatusService.updateToOnline()

// Configuration in application.yml would route NATS subjects to these consumers:
// spring.cloud.function.definition: machineConnectedConsumer;machineDisconnectionConsumer
```

**Note**: The TODO comment indicates a planned heartbeat fallback mechanism for when NATS messaging is unavailable, suggesting this is part of a resilient distributed system architecture.