<!-- source-hash: 371e45b1c0593c8f5b5ea22afd0740e9 -->
A NATS JetStream message listener that handles tool connection events for machines in the OpenFrame system, managing subscription lifecycle and message processing with retry capabilities.

## Key Components

- **subscribeToToolConnections()** - Event listener that initializes JetStream subscription on application startup
- **buildConsumerConfig()** - Creates or updates NATS consumer configuration with delivery groups and retry settings
- **handleMessage()** - Processes incoming tool connection messages, extracting machine ID and delegating to service layer
- **cleanup()** - PreDestroy method that properly closes subscriptions and drains dispatcher resources

## Usage Example

```java
@Component
public class ExampleUsage {
    
    private final ToolConnectionListener listener;
    
    // The listener automatically subscribes on ApplicationReadyEvent
    // and processes messages with this flow:
    
    // 1. Message arrives on subject: "machine.{machineId}.tool-connection"
    // 2. Extract machineId from subject using NatsTopicMachineIdExtractor
    // 3. Parse JSON payload into ToolConnectionMessage
    // 4. Call toolConnectionService.addToolConnection()
    // 5. Acknowledge message or leave unacked for retry
    
    // Consumer configuration includes:
    // - Durable consumer with delivery group for load balancing
    // - Maximum 50 delivery attempts with 30-second ack timeout
    // - Explicit acknowledgment policy for reliable processing
}
```

The listener uses a versioned consumer name (`tool-connection-processor-v2`) to handle deployment updates and includes comprehensive error handling with automatic retry mechanisms through NATS JetStream's delivery policies.