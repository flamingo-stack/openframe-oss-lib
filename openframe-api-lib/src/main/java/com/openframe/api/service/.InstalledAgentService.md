<!-- source-hash: 0866dafed16ddc514a1d80f6241f01b4 -->
A Spring service that manages operations for installed agents across machines, providing methods to query agent installations by machine ID, agent type, and batch operations for multiple machines.

## Key Components

- **`getInstalledAgentsForMachines()`** - Core batch method that retrieves agents for multiple machines efficiently using grouping
- **`getInstalledAgentsForMachine()`** - Single machine agent lookup
- **`getAllInstalledAgents()`** - Retrieves all installed agents across the system
- **`getInstalledAgent()`** - Finds specific agent by unique ID
- **`getInstalledAgentByMachineIdAndType()`** - Locates agent by machine and type combination
- **InstalledAgentRepository** - Data access layer dependency for database operations

## Usage Example

```java
@Autowired
private InstalledAgentService installedAgentService;

// Get agents for multiple machines (efficient batch operation)
List<String> machineIds = Arrays.asList("machine1", "machine2", "machine3");
List<List<InstalledAgent>> agentsByMachine = installedAgentService
    .getInstalledAgentsForMachines(machineIds);

// Get agents for a single machine
List<InstalledAgent> machineAgents = installedAgentService
    .getInstalledAgentsForMachine("machine1");

// Find specific agent by machine and type
Optional<InstalledAgent> agent = installedAgentService
    .getInstalledAgentByMachineIdAndType("machine1", "monitoring");

if (agent.isPresent()) {
    log.info("Found agent: {}", agent.get().getAgentType());
}
```

The service uses stream operations and grouping for efficient data processing, particularly in the batch retrieval method which minimizes database queries while maintaining order consistency with the input machine ID list.