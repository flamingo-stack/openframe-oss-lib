<!-- source-hash: 2dfa15b05bfdb4e8574cda1bbeafc49c -->
A Spring service that manages device/machine operations including querying, filtering, and status management within the OpenFrame API system.

## Key Components

- **Device Lookup**: `findByMachineId()` - Retrieves machines by their unique machine ID
- **Advanced Querying**: `queryDevices()` - Supports filtering, cursor-based pagination, and text search
- **Status Management**: `updateStatusByMachineId()`, `softDeleteByMachineId()` - Updates device status and performs soft deletion
- **Tag Resolution**: `resolveTagNamesToMachineIds()` - Maps tag names to associated machine IDs for filtering
- **Query Building**: `buildDeviceQuery()` - Constructs MongoDB queries with filters and search criteria

The service uses cursor-based pagination for efficient large dataset handling and integrates with repositories for machines, tags, and machine-tag associations.

## Usage Example

```java
@Autowired
private DeviceService deviceService;

// Find a specific device
Optional<Machine> device = deviceService.findByMachineId("machine-123");

// Query devices with filters and pagination
DeviceFilterOptions filters = DeviceFilterOptions.builder()
    .statuses(List.of(DeviceStatus.ONLINE))
    .tagNames(List.of("production", "web-server"))
    .build();

CursorPaginationCriteria pagination = CursorPaginationCriteria.builder()
    .limit(20)
    .cursor("cursor-token")
    .build();

CountedGenericQueryResult<Machine> results = deviceService.queryDevices(
    filters, pagination, "server-name");

// Update device status
deviceService.updateStatusByMachineId("machine-123", DeviceStatus.MAINTENANCE);

// Soft delete a device
deviceService.softDeleteByMachineId("machine-123");
```