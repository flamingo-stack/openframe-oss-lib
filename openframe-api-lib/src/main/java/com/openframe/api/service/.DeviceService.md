<!-- source-hash: 2dfa15b05bfdb4e8574cda1bbeafc49c -->
A Spring service class that manages device/machine operations including querying, filtering, status updates, and soft deletion with cursor-based pagination support.

## Key Components

- **findByMachineId()** - Retrieves a machine by its unique machine ID
- **queryDevices()** - Performs complex device queries with filtering, search, and cursor pagination
- **softDeleteByMachineId()** - Marks a device as deleted without physical removal
- **updateStatusByMachineId()** - Updates device status with timestamp tracking
- **buildDeviceQuery()** - Constructs MongoDB queries with filters and tag-based criteria
- **resolveTagNamesToMachineIds()** - Maps tag names to associated machine IDs

## Usage Example

```java
@Autowired
private DeviceService deviceService;

// Find a specific device
Optional<Machine> device = deviceService.findByMachineId("machine-123");

// Query devices with filters
DeviceFilterOptions filters = new DeviceFilterOptions();
filters.setStatuses(List.of(DeviceStatus.ACTIVE));
filters.setTagNames(List.of("production", "web-server"));

CursorPaginationCriteria pagination = new CursorPaginationCriteria();
pagination.setLimit(20);

CountedGenericQueryResult<Machine> results = 
    deviceService.queryDevices(filters, pagination, "search-term");

// Update device status
deviceService.updateStatusByMachineId("machine-123", DeviceStatus.MAINTENANCE);

// Soft delete device
deviceService.softDeleteByMachineId("machine-123");
```