flowchart LR
    Browser["Browser Client"] -->|"/oauth/login"| Bff["OAuth BFF Controller"]
    Bff -->|"PKCE + State"| AuthServer["Authorization Server"]
    AuthServer -->|"Authorization Code"| Bff
    Bff -->|"Token Exchange"| AuthServer
    Bff -->|"Set HttpOnly Cookies"| Browser
    Browser -->|"API Requests with Cookies"| Gateway["API Gateway"]
    Gateway -->|"JWT Validation"| Resource["Resource Services"]
