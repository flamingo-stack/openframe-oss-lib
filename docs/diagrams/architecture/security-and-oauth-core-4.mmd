sequenceDiagram
    participant Client
    participant BFF as "OAuth BFF"
    participant AuthServer as "Authorization Server"

    Client->>BFF: Request login
    BFF->>BFF: generateState()
    BFF->>BFF: generateCodeVerifier()
    BFF->>BFF: generateCodeChallenge()
    BFF->>AuthServer: Authorization request with code_challenge
    AuthServer->>Client: Redirect with authorization code
    Client->>BFF: Send code + state
    BFF->>AuthServer: Token request with code_verifier
    AuthServer->>BFF: Access + Refresh Token
