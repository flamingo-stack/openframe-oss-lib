flowchart TD

    subgraph Edge_Layer["Edge Layer"]
        Gateway["Gateway Service Core"]
        BFF["Security OAuth BFF"]
    end

    subgraph Identity_Layer["Identity Layer"]
        Auth["Authorization Service Core"]
        SecurityCore["Security And OAuth Core"]
    end

    subgraph API_Layer["API Layer"]
        ApiService["API Service Core"]
        ExternalApi["External API Service Core"]
        Contracts["API Lib Contracts"]
    end

    subgraph Agent_Layer["Agent Layer"]
        ClientCore["Client Agent Core"]
    end

    subgraph Data_Layer["Data Layer"]
        Mongo["Data Mongo Core"]
        Redis["Data Redis Cache"]
        Kafka["Data Kafka Core"]
        PlatformData["Data Platform Core"]
    end

    subgraph Stream_Layer["Stream Processing"]
        StreamCore["Stream Processing Core"]
    end

    subgraph Ops_Layer["Operations & Control Plane"]
        Management["Management Service Core"]
    end

    BFF --> Gateway
    Gateway --> ApiService
    Gateway --> ExternalApi
    Gateway --> Auth

    Auth --> SecurityCore

    ApiService --> Contracts
    ExternalApi --> Contracts

    ApiService --> Mongo
    ApiService --> Redis
    ApiService --> Kafka

    ClientCore --> Kafka
    ClientCore --> ApiService

    Kafka --> StreamCore
    StreamCore --> PlatformData

    PlatformData --> Mongo
    PlatformData --> Cassandra["Cassandra"]
    PlatformData --> Pinot["Apache Pinot"]

    Management --> Kafka
    Management --> Mongo
    Management --> Redis
    Management --> Pinot
