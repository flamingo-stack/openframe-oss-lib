flowchart TD
    subgraph Clients
        Browser["Browser / Admin UI"]
        Agent["Client Agent"]
        ExternalClient["External API Client"]
    end

    subgraph Edge
        Gateway["Gateway Service Core"]
        OAuthBff["Security Core & OAuth BFF"]
    end

    subgraph Identity
        Authz["Authorization Service Core"]
    end

    subgraph ApiLayer
        ApiCore["Api Service Core"]
        ExternalApi["External Api Service Core"]
        Contracts["Api Lib Contracts"]
    end

    subgraph ClientLayer
        ClientCore["Client Service Core"]
        Nats["NATS"]
    end

    subgraph Streaming
        Kafka["Data Kafka Foundation"]
        StreamCore["Stream Processing Core"]
    end

    subgraph DataLayer
        Mongo["Data Mongo Domain & Repos"]
        Redis["Data Redis Cache"]
        Cassandra["Cassandra"]
        Pinot["Pinot"]
    end

    subgraph Management
        Mgmt["Management Service Core"]
    end

    Browser --> OAuthBff
    OAuthBff --> Authz
    Browser --> Gateway
    ExternalClient --> Gateway
    Agent --> ClientCore

    Gateway --> ApiCore
    Gateway --> ExternalApi

    ApiCore --> Contracts
    ExternalApi --> Contracts
    Contracts --> Mongo

    ClientCore --> Mongo
    ClientCore --> Nats

    ApiCore --> Kafka
    Kafka --> StreamCore
    StreamCore --> Cassandra
    StreamCore --> Pinot

    ApiCore --> Redis
    Mgmt --> Kafka
    Mgmt --> Nats
    Mgmt --> Pinot
