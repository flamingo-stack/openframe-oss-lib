flowchart LR
    Client["External Client"] -->|"X-API-Key"| Gateway["Gateway Service"]
    Gateway --> ExternalApi["External Api Service Core"]

    subgraph controllers["REST Controllers"]
        DeviceCtrl["DeviceController"]
        EventCtrl["EventController"]
        LogCtrl["LogController"]
        OrgCtrl["OrganizationController"]
        ToolCtrl["ToolController"]
        IntegrationCtrl["IntegrationController"]
    end

    ExternalApi --> DeviceCtrl
    ExternalApi --> EventCtrl
    ExternalApi --> LogCtrl
    ExternalApi --> OrgCtrl
    ExternalApi --> ToolCtrl
    ExternalApi --> IntegrationCtrl

    DeviceCtrl --> DeviceService["DeviceService"]
    EventCtrl --> EventService["EventService"]
    LogCtrl --> LogService["LogService"]
    OrgCtrl --> OrgServices["Organization Services"]
    ToolCtrl --> ToolService["ToolService"]

    IntegrationCtrl --> RestProxy["RestProxyService"]
    RestProxy --> IntegratedTool["Integrated Tool APIs"]
