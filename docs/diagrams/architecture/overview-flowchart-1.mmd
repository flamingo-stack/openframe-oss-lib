flowchart TD
    subgraph API Layer
        A1["api_service_core_controller"]
        A2["external_api_service_core_controller"]
    end
    subgraph Service Layer
        B1["api_lib_service"]
        B2["api_service_core_service"]
        B3["api_service_core_service_user"]
    end
    subgraph Data Layer
        C1["data_mongo_document_device"]
        C2["data_mongo_document_event"]
        C3["data_mongo_document_organization"]
        C4["data_mongo_document_tool"]
    end
    subgraph DTOs
        D1["api_lib_dto_device"]
        D2["api_lib_dto_event"]
        D3["api_lib_dto_organization"]
        D4["api_lib_dto_tool"]
        D5["api_lib_dto_audit"]
        D6["api_lib_dto_shared"]
    end

    A1 -->|uses| D1
    A1 -->|uses| D2
    A1 -->|uses| D3
    A1 -->|uses| D4
    A1 -->|uses| D5
    A1 -->|uses| D6
    A2 -->|uses| D1
    A2 -->|uses| D2
    A2 -->|uses| D3
    A2 -->|uses| D4
    A2 -->|uses| D5
    A2 -->|uses| D6

    D1 -->|maps to| C1
    D2 -->|maps to| C2
    D3 -->|maps to| C3
    D4 -->|maps to| C4
    D5 -->|maps to| C2
    D6 -->|shared by| D1
    D6 -->|shared by| D2
    D6 -->|shared by| D3
    D6 -->|shared by| D4
    D6 -->|shared by| D5

    A1 -->|delegates| B1
    A1 -->|delegates| B2
    A1 -->|delegates| B3
    B1 -->|operates on| C1
    B1 -->|operates on| C4
    B2 -->|operates on| C2
    B3 -->|operates on| C3