flowchart TD
    Client["Client / UI / Agent"] --> Gateway["Gateway Service Core"]

    Gateway --> ApiService["API Service Core"]
    Gateway --> ExternalApi["External API Service Core"]
    Gateway --> ClientService["Client Service Core"]
    Gateway --> Tools["Integrated Tools"]
    Gateway --> Nats["NATS WebSocket"]

    subgraph security_layer["Security & Filtering"]
        JwtAuth["JWT Authentication"]
        ApiKeyAuth["API Key Authentication"]
        RateLimit["Rate Limiting"]
        Cors["CORS Handling"]
    end

    Gateway --> JwtAuth
    Gateway --> ApiKeyAuth
    Gateway --> RateLimit
    Gateway --> Cors
