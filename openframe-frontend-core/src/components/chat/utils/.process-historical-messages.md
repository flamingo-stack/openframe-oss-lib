<!-- source-hash: 7e09c2236a5e011ba67fbc791276c8dc -->
A utility for transforming historical chat messages from GraphQL/API format into display-ready format for the Flamingo platform's AI assistant interfaces. It processes various message types including text, tool executions, approval requests, and errors while maintaining proper conversation flow and handling message accumulation.

## Key Components

- **`processHistoricalMessages`** - Main function that converts raw historical messages into processed format
- **`processHistoricalMessagesWithErrors`** - Extended version that includes error messages in chronological order  
- **`extractErrorMessages`** - Utility to extract only error messages from historical data
- **`ProcessHistoricalMessagesResult`** - Result interface containing processed messages and escalated approvals
- **`processMessageData`** - Internal function handling individual message data transformation

## Usage Example

```typescript
import { processHistoricalMessages } from './process-historical-messages'
import type { HistoricalMessage } from '../types'

// Process messages with custom options
const result = processHistoricalMessages(historicalMessages, {
  assistantName: 'Fae',
  assistantType: 'fae',
  assistantAvatar: '/fae-avatar.png',
  chatTypeFilter: 'support',
  approvalStatuses: { 'req-123': 'approved' },
  displayApprovalTypes: ['CLIENT', 'ADMIN'],
  onApprove: (id: string) => handleApproval(id, true),
  onReject: (id: string) => handleApproval(id, false)
})

// Access processed messages and escalated approvals
const { messages, escalatedApprovals } = result
```

The utility handles message grouping by conversation participants, processes tool executions and approval workflows, and maintains proper timestamps for chat display components.