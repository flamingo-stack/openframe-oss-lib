<!-- source-hash: 98a728ec9aee3875974bd59c7d8b3fc2 -->
A browser-compatible NATS client wrapper that provides WebSocket-based messaging with typed publish/subscribe operations and connection management for real-time communication in Flamingo's distributed architecture.

## Key Components

### Main Interfaces
- **`NatsClient`** - Primary client interface with connect/publish/subscribe methods
- **`NatsClientOptions`** - Connection configuration including servers, auth, and reconnect settings
- **`NatsSubscribeOptions`** - Subscription options for queue groups and message limits
- **`NatsPublishOptions`** - Publishing options with header support
- **`NatsRequestOptions`** - Request-response timeout and header configuration

### Core Functions
- **`createNatsClient(options)`** - Factory function that creates a configured NATS client instance
- **`assertClientSide()`** - Runtime check ensuring WebSocket support (browser/Tauri only)
- **`importNats()`** - Dynamic import of the `nats.ws` library for browser compatibility

### Message Types
- **Bytes** - Raw `Uint8Array` for binary data
- **String** - Text-based messaging with automatic encoding/decoding
- **JSON** - Typed object serialization for structured data

## Usage Example

```typescript
// Create and configure client
const client = createNatsClient({
  servers: "wss://nats.flamingo.run:443",
  name: "openframe-client",
  token: "your-auth-token",
  reconnect: true,
  maxReconnectAttempts: 5
})

// Connect and handle status events
await client.connect()
client.onStatus((event) => {
  console.log(`NATS status: ${event.status}`)
})

// Publish JSON message
client.publishJson("alerts.system", { 
  type: "error", 
  message: "Service unavailable" 
})

// Subscribe to typed messages
const subscription = client.subscribeJson<AlertMessage>(
  "alerts.*",
  (alert, msg) => {
    console.log(`Alert from ${msg.subject}:`, alert)
  },
  { queue: "alert-processors" }
)

// Request-response pattern
const response = await client.requestJson<StatusResponse, StatusRequest>(
  "system.status",
  { component: "database" },
  { timeoutMs: 5000 }
)
```